(this["webpackJsonpjustin-grady-fitnesstrackr"]=this["webpackJsonpjustin-grady-fitnesstrackr"]||[]).push([[0],{32:function(e,t,n){"use strict";n.r(t);var r=n(6),s=n(1),a=n(16),c=n.n(a),o=n(2),i=n(3),u=n(0),j=function(){return Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)("h1",{children:"Welcome to Fitness.Trackr!"}),Object(u.jsxs)("p",{children:["Returning user?",Object(u.jsx)(o.b,{to:"/login",children:" Login Here!"})]}),Object(u.jsxs)("p",{children:["First time here?",Object(u.jsx)(o.b,{to:"/register",children:" Register Here!"})]}),Object(u.jsxs)("p",{children:["Take a look at some of the routines our users have made! ",Object(u.jsx)(o.b,{to:"/routines",children:" Click here! "})]})]})},l=n(4),b=n.n(l),d=n(11),h=n(8),p="SecureToken",O={grabToken:function(){return localStorage.getItem(p)},saveToken:function(e){localStorage.setItem(p,e)},deleteToken:function(){localStorage.removeItem(p)}},m={makeRequest:function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var s,a,c,o,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=O.grabToken(),a={"Content-Type":"application/json"},s&&(a.Authorization="Bearer ".concat(s),console.log(a)),c={method:n,headers:a},r&&(c.body=JSON.stringify(r)),e.next=7,fetch("https://fitnesstrac-kr.herokuapp.com/api"+t,c);case 7:return o=e.sent,console.log(o),e.next=11,o.json();case 11:return i=e.sent,console.log(i),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},x=function(){Object(i.f)();var e=Object(s.useState)({username:"",password:""}),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)({passwordConfirm:""}),o=Object(r.a)(c,2),j=o[0],l=o[1];function p(e){var t=e.target.attributes.name.value,r=Object(d.a)({},n);r[t]=e.target.value,a(r),console.log(n,a)}function O(){return(O=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(n.username),n.username.length<1||n.password.length<1?alert("username/Password must not be empty"):n.username.length<5||n.password.length<5?alert("username/Password must be longer than 5 characters"):n.username.length>15||n.password.length>15?alert("username/Password must be less than 16 characters"):n.password!==j.passwordConfirm?alert("Password must be the same in both fields"):createServerToken();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(u.jsx)("input",{type:"text",required:!0,name:"username",value:n.username,onChange:p,placeholder:"username"}),Object(u.jsx)("input",{type:"password",required:!0,name:"password",value:n.password,onChange:p,placeholder:"password"}),Object(u.jsx)("input",{type:"password-confirmation",required:!0,name:"password-confirmation",value:j.passwordConfirm,onChange:function(e){var t=e.target.getAttribute("name");console.log(t);var n=e.target.attributes.name.value,r=Object(d.a)({},n);r[n]=e.target.value,l(r)},placeholder:"password-confirmation"}),Object(u.jsx)("button",{children:"Register"})]})})},g=function(e){var t=e.name,n=e.goal,a=e.creatorName,c=e.activities,o=Object(s.useState)({}),i=Object(r.a)(o,2);i[0],i[1];return Object(u.jsx)("div",{id:"routine",children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("h3",{children:["Routine: ",t]}),Object(u.jsxs)("p",{children:["Goal: ",n]}),Object(u.jsxs)("p",{children:["Creator: ",a]}),Object(u.jsxs)("p",{children:["Involved activities: ",c]})]})})},v=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1];Object(s.useEffect)(Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.makeRequest("/routines","GET");case 3:t=e.sent,console.log(t),a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),console.log(n);var c=n.map((function(e,t){return Object(u.jsx)(g,{name:e.name,goal:e.goal,creatorName:e.creatorName,activities:e.activities},"Routine Number"+t)}));return Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)("h1",{children:"This is a list of all the public routines"}),Object(u.jsxs)("p",{children:["Want to create or update a routine? ",Object(u.jsx)(o.b,{to:"/login",children:" Login Here!"})]}),c]})},f=function(e){var t=e.setSavedToken,n=Object(i.f)(),a=Object(s.useState)({username:"",password:""}),c=Object(r.a)(a,2),j=c[0],l=c[1];function p(){return(p=Object(h.a)(b.a.mark((function e(){var r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=j,e.next=4,m.makeRequest("/users/login","POST",r);case 4:s=e.sent,O.saveToken(s.data.token),t(O.grabToken()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:return e.prev=12,n.push("/posts"),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))).apply(this,arguments)}function x(e){var t=e.target.attributes.name.value,n=Object(d.a)({},j);n[t]=e.target.value,l(n)}return Object(u.jsxs)("div",{id:"login",children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(){p.apply(this,arguments)}()},children:[Object(u.jsx)("input",{type:"text",required:!0,name:"username",value:j.username,onChange:x,placeholder:"username"}),Object(u.jsx)("input",{type:"password",required:!0,name:"password",value:j.password,onChange:x,placeholder:"password"}),Object(u.jsx)("button",{children:"Submit"})]}),Object(u.jsx)("p",{children:"Don't have a login? Click below to register!"}),Object(u.jsx)(o.b,{to:"/Register",children:"Register"})]})},k=function(e){var t=e.isLoggedIn,n=e.setToken;return Object(u.jsxs)("header",{children:[Object(u.jsx)("h1",{children:"Fitness.Trackr"}),t?Object(u.jsxs)("nav",{className:"navbar",children:[Object(u.jsx)(o.b,{to:"/Home",children:"Home"}),Object(u.jsx)(o.b,{to:"/Routines",children:"Routines"}),Object(u.jsx)("button",{onClick:function(e){e.preventDefault(),O.removeToken(),n(null)},children:"Logout"})]}):Object(u.jsxs)("nav",{className:"navbar",children:[Object(u.jsx)(o.b,{to:"/Home",children:"Home"}),Object(u.jsx)(o.b,{to:"/Routines",children:"Routines"}),Object(u.jsx)(o.b,{to:"/Login",children:Object(u.jsx)("button",{children:"Log in"})}),Object(u.jsx)(o.b,{to:"/Register",children:Object(u.jsx)("button",{children:"Register"})})]})]})},w=function(){var e=Object(s.useState)(O.grabToken()),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!!n),l=Object(r.a)(c,2),b=l[0],d=l[1];return Object(s.useEffect)((function(){d(!!n)}),[n]),Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)(k,{isLoggedIn:b,setToken:O.saveToken}),Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.b,{to:"/",children:"Home"}),Object(u.jsx)(o.b,{to:"/register",children:"Register"}),Object(u.jsx)(o.b,{to:"/login",children:"Login"}),Object(u.jsx)(o.b,{to:"/routines",children:"Routines"})]}),Object(u.jsx)("main",{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/register",children:Object(u.jsx)(x,{setSavedToken:a})}),Object(u.jsx)(i.a,{path:"/login",children:Object(u.jsx)(f,{setSavedToken:a})}),Object(u.jsx)(i.a,{path:"/",children:Object(u.jsx)(j,{})}),Object(u.jsx)(i.a,{path:"/routines",children:Object(u.jsx)(v,{})})]})})]})};t.default=w;c.a.render(Object(u.jsx)(o.a,{children:Object(u.jsx)(w,{})}),document.getElementById("App"))}},[[32,1,2]]]);
//# sourceMappingURL=main.12bda79d.chunk.js.map