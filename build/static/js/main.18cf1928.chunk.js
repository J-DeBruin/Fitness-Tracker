(this["webpackJsonpjustin-grady-fitnesstrackr"]=this["webpackJsonpjustin-grady-fitnesstrackr"]||[]).push([[0],{32:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(1),s=n(18),a=n.n(s),i=n(2),o=n(4),u=n(0),j=function(){return Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)("h1",{children:"Welcome to Fitness.Trackr!"}),Object(u.jsxs)("p",{children:["Returning user?",Object(u.jsx)(i.b,{to:"/login",children:" Login Here!"})]}),Object(u.jsxs)("p",{children:["First time here?",Object(u.jsx)(i.b,{to:"/register",children:" Register Here!"})]}),Object(u.jsxs)("p",{children:["Take a look at some of the routines our users have made! ",Object(u.jsx)(i.b,{to:"/routines",children:" Click here! "})]})]})},l=n(3),b=n.n(l),d=n(11),h=n(7),p="token",O={getToken:function(){return localStorage.getItem(p)},storeToken:function(e){localStorage.setItem(p,e)},removeToken:function(){localStorage.removeItem(p)}},x={makeApiRequest:function(){var e=Object(h.a)(b.a.mark((function e(t,n,r){var c,s,a,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.getToken(),s={"Content-Type":"application/json"},c&&(s.authorization="Bearer ".concat(c)),a={method:n,headers:s},r&&(a.body=JSON.stringify(r)),e.next=7,fetch("https://fitnesstrac-kr.herokuapp.com/api/"+t,a);case 7:return i=e.sent,e.next=10,i.json();case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},f=function(){Object(o.f)();var e=Object(c.useState)({username:"",password:""}),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)({passwordConfirm:""}),i=Object(r.a)(a,2),j=i[0],l=i[1];function p(e){var t=e.target.attributes.name.value,r=Object(d.a)({},n);r[t]=e.target.value,s(r),console.log(n,s)}function O(){return(O=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(n.username),n.username.length<1||n.password.length<1?alert("username/Password must not be empty"):n.username.length<5||n.password.length<5?alert("username/Password must be longer than 5 characters"):n.username.length>15||n.password.length>15?alert("username/Password must be less than 16 characters"):n.password!==j.passwordConfirm?alert("Password must be the same in both fields"):createServerToken();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(u.jsx)("input",{type:"text",required:!0,name:"username",value:n.username,onChange:p,placeholder:"username"}),Object(u.jsx)("input",{type:"password",required:!0,name:"password",value:n.password,onChange:p,placeholder:"password"}),Object(u.jsx)("input",{type:"password-confirmation",required:!0,name:"password-confirmation",value:j.passwordConfirm,onChange:function(e){e.target.getAttribute("name");var t=e.target.attributes.name.value,n=Object(d.a)({},t);n[t]=e.target.value,l(n)},placeholder:"password-confirmation"}),Object(u.jsx)("button",{children:"Register"})]})})},m=function(e){var t=e.setToken,n=Object(o.f)(),s=Object(c.useState)(""),a=Object(r.a)(s,2),j=a[0],l=a[1],b=Object(c.useState)(""),d=Object(r.a)(b,2),h=d[0],p=d[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:" Welcome! "}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e,r){fetch("https://fitnesstrac-kr.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),console.log(e.message),alert(e.message),t(e.token)})).catch((function(e){console.error,alert(e.message)})).finally((function(){n.push("/")}))}()},children:[Object(u.jsx)("input",{type:"text",required:!0,name:"username",value:j,onChange:function(e){return l(e.currentTarget.value)},placeholder:"username"}),Object(u.jsx)("input",{type:"password",required:!0,name:"password",value:h,onChange:function(e){return p(e.currentTarget.value)},placeholder:"password"}),Object(u.jsx)("button",{children:"Submit"})]}),Object(u.jsx)("p",{children:"If you are not a registered user, please click below to register!"}),Object(u.jsx)(i.b,{to:"/Register",children:"Register"})]})},v=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(r.a)(a,2),o=i[0],j=i[1],l=Object(c.useState)([]),d=Object(r.a)(l,2),p=d[0],O=d[1],x=Object(c.useState)(!1),f=Object(r.a)(x,2),m=f[0],v=f[1],g=function(e,t){var n=localStorage.getItem("token");console.log(n),fetch("https://fitnesstrac-kr.herokuapp.com/api/routines",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({name:e,goal:t,isPublic:!0})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(){console.error,alert("Try a different routine name.  This was is used already!")}))},k=function(){var e=Object(h.a)(b.a.mark((function e(t,n){var r,c,s,a,i,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.prev=1,e.next=4,fetch("https://fitnesstrac-kr.herokuapp.com/api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,a=s.username,i="http://fitnesstrac-kr.herokuapp.com/api/users/".concat(a,"/routines"),e.next=12,fetch(i,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 12:return o=e.sent,e.next=15,o.json();case 15:u=e.sent,O(u),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error;case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)(k,[]);var y=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),console.log(n),e.prev=2,r="http://fitnesstrac-kr.herokuapp.com/api/routines/".concat(t),e.next=6,fetch(r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 6:return c=e.sent,e.next=9,c.json();case 9:(s=e.sent).success&&alert('"'.concat(s.name,'" has been successfully deleted"')),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n,o),e.next=4,g(n,o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Routine will be deleted if you confirm!")){e.next=5;break}return t.preventDefault(),e.next=4,y(t.currentTarget.value);case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){v(!m)},R=p.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:["Name: ",e.name," "]}),Object(u.jsxs)("p",{children:["Goal: ",e.goal," "]}),Object(u.jsx)("button",{value:e.id,onClick:T,children:"Edit Routine"}),m&&Object(u.jsx)("div",{children:Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{type:"text",name:"routinename",value:n,onChange:function(e){return s(e.currentTarget.value)}})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Goal: "}),Object(u.jsx)("input",{type:"text",name:"goal",value:o,onChange:function(e){return j(e.currentTarget.value)}})]})]})}),Object(u.jsx)("button",{value:e.id,onClick:S,children:"Delete Routine"})]},"activitiesId-".concat(t))}));return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Add New Routine"}),Object(u.jsxs)("form",{onSubmit:w,children:[Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:["Name: ",Object(u.jsx)("input",{type:"text",name:"name",id:"name",value:n,onChange:function(e){return s(e.currentTarget.value)}})]}),Object(u.jsxs)("li",{children:["Goal: ",Object(u.jsx)("input",{type:"text",name:"goal",id:"goal",value:o,onChange:function(e){return j(e.currentTarget.value)}})]})]}),Object(u.jsx)("button",{children:"Add A New Routine"})]})]}),Object(u.jsx)("h1",{children:" My Routines "}),R]})},g=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)(Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.makeApiRequest("/routines","GET");case 3:t=e.sent,console.log(t),s(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n]);var a=n.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:[" Routine: ",e.name," "]}),Object(u.jsxs)("p",{children:["Goal: ",e.goal]}),Object(u.jsxs)("p",{children:["Creator: ",e.creatorName]}),e.activities.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["Activity Name: ",e.name]}),Object(u.jsxs)("ul",{children:["Activity Description: ",e.description]}),Object(u.jsxs)("ul",{children:["Activity Duration: ",e.duration]}),Object(u.jsxs)("ul",{children:["Activity Count: ",e.count]})]})}))]},"routineId-".concat(t))}));return Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)("h1",{children:"Public Routines"}),Object(u.jsxs)("p",{children:["If you want to modify routines, ",Object(u.jsx)(i.b,{to:"/login",children:" Login Here!"})]}),a]})},k=function(e){var t=e.isLoggedIn,n=e.setToken,r=Object(o.f)();return Object(u.jsxs)("div",{children:[Object(u.jsx)("header",{children:Object(u.jsx)("h1",{children:"Fitness Tracker"})}),t?Object(u.jsx)("nav",{className:"navBar",children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(i.b,{to:"/",children:" Home "}),Object(u.jsx)(i.b,{to:"/Routines",children:" Routines "}),Object(u.jsx)(i.b,{to:"/MyRoutines",children:" My Routines "}),Object(u.jsx)(i.b,{to:"/Activities",children:" Activities "}),Object(u.jsx)("button",{onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),n(null),r.push("/Home")},children:"Logout"})]})}):Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(i.b,{to:"/",children:" Home "}),Object(u.jsx)(i.b,{to:"/Routines",children:" Routines "}),Object(u.jsx)(i.b,{to:"/Activities",children:" Activities "}),Object(u.jsx)(i.b,{to:"/Login",children:" Login "}),Object(u.jsx)(i.b,{to:"/Register",children:" Register "})]})})]})},y=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)({name:"",description:""}),i=Object(r.a)(a,2),o=i[0],j=i[1],l=Object(c.useState)(""),p=Object(r.a)(l,2),O=(p[0],p[1]),f=Object(c.useState)(""),m=Object(r.a)(f,2),v=(m[0],m[1]);Object(c.useEffect)(Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.makeApiRequest("activities?limit=8","GET");case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]);var g=n.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:" Activities "}),Object(u.jsxs)("h2",{children:[" Name :",e.name," "]}),Object(u.jsxs)("p",{children:["description:",e.description]})]},"activitiesId-".concat(t))}));function k(e,t){"name"===t?O(e.target.value):"description"===t&&v(e.target.value);var n=Object(d.a)({},o),r=e.target.value;n[t]=r,j(n)}function y(){return(y=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x.makeApiRequest("/activities","POST",o);case 3:history.push;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Activity:"}),Object(u.jsx)("input",{onChange:function(e){return k(e,"name")},value:o.name,type:"text"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Description:"}),Object(u.jsx)("input",{onChange:function(e){return k(e,"description")},value:o.description,type:"text"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{children:"Submit"})})]})}),Object(u.jsxs)("div",{children:[g,Object(u.jsx)("h1",{children:"Activities"})]})]})},w=function(){var e=Object(c.useState)(localStorage.getItem("token")),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!!n),l=Object(r.a)(a,2),b=l[0],d=l[1];return Object(c.useEffect)((function(){d(!!n)}),[n]),Object(u.jsxs)("div",{id:"App",children:[Object(u.jsx)(k,{isLoggedIn:b,setToken:O.saveToken}),Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(i.b,{to:"/",children:"Home"}),Object(u.jsx)(i.b,{to:"/register",children:"Register"}),Object(u.jsx)(i.b,{to:"/login",children:"Login"}),Object(u.jsx)(i.b,{to:"/routines",children:"Routines"}),Object(u.jsx)(i.b,{to:"/myroutines",children:"My Routines"})]})}),Object(u.jsx)("main",{children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/Register",children:Object(u.jsx)(f,{setToken:s})}),Object(u.jsx)(o.a,{path:"/Login",children:Object(u.jsx)(m,{setToken:s})}),Object(u.jsx)(o.a,{exact:!0,path:"/",children:Object(u.jsx)(j,{})}),Object(u.jsx)(o.a,{path:"/Routines",children:Object(u.jsx)(g,{})}),Object(u.jsx)(o.a,{path:"/Activities",children:Object(u.jsx)(y,{})}),Object(u.jsx)(o.a,{path:"MyRoutines",children:Object(u.jsx)(v,{})})]})})]})};a.a.render(Object(u.jsx)(i.a,{children:Object(u.jsx)(w,{})}),document.getElementById("app"));t.default=w}},[[32,1,2]]]);
//# sourceMappingURL=main.18cf1928.chunk.js.map